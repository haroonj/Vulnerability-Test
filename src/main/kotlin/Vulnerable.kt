import java.sql.Connection
import java.sql.DriverManager
import java.sql.ResultSet
import java.sql.Statement

fun main() {
    val username = "userInput" // This should come from user input, e.g., a web form
    val password = "passwordInput" // This should come from user input, e.g., a web form

    val url = "jdbc:mysql://localhost:3306/mydatabase"
    val user = "root"
    val pass = "password"

    var connection: Connection? = null
    var statement: Statement? = null
    var resultSet: ResultSet? = null

    try {
        // Establish connection
        connection = DriverManager.getConnection(url, user, pass)

        // Create statement
        statement = connection.createStatement()

        // SQL query vulnerable to SQL Injection
        val sql = "SELECT * FROM users WHERE username = '$username' AND password = '$password'"

        // Execute query
        resultSet = statement.executeQuery(sql)

        // Process the result set
        while (resultSet.next()) {
            println("User found: ${resultSet.getString("username")}")
        }

    } catch (ex: Exception) {
        ex.printStackTrace()
    } finally {
        // Close resources
        resultSet?.close()
        statement?.close()
        connection?.close()
    }
}
